# 高亮功能示例

## 📝 示例 1：相邻关键词

**搜索**：`机器学习`

**文档内容**：
```
机器学习是人工智能的一个分支。
```

**高亮效果**：
```
<mark>机</mark><mark>器</mark><mark>学</mark><mark>习</mark>是人工智能的一个分支。
```

**显示效果**：
> **机器学习**是人工智能的一个分支。（黄色高亮）

---

## 📝 示例 2：不相邻关键词

**搜索**：`机器 学习`（注意中间有空格）

**文档内容**：
```
机器学习是人工智能的一个分支。深度学习也是机器学习的子领域。
```

**高亮效果**：
```
<mark>机</mark><mark>器</mark><mark>学</mark><mark>习</mark>是人工智能的一个分支。深度<mark>学</mark><mark>习</mark>也是<mark>机</mark><mark>器</mark><mark>学</mark><mark>习</mark>的子领域。
```

**显示效果**：
> **机器学习**是人工智能的一个分支。深度**学习**也是**机器学习**的子领域。

**说明**：
- ✅ "机器学习"被高亮（4个字都匹配）
- ✅ "深度学习"中的"学习"被高亮（2个字匹配）
- ✅ 第二个"机器学习"也被高亮

---

## 📝 示例 3：中英文混合

**搜索**：`Python 机器学习`

**文档内容**：
```
Python 是机器学习最常用的编程语言。
学习 Python 对于机器学习工程师很重要。
```

**高亮效果**：
```
<mark>Python</mark> 是<mark>机</mark><mark>器</mark><mark>学</mark><mark>习</mark>最常用的编程语言。
<mark>学</mark><mark>习</mark> <mark>Python</mark> 对于<mark>机</mark><mark>器</mark><mark>学</mark><mark>习</mark>工程师很重要。
```

**显示效果**：
> **Python** 是**机器学习**最常用的编程语言。
> **学习** **Python** 对于**机器学习**工程师很重要。

**说明**：
- ✅ 英文单词 "Python" 完整匹配
- ✅ 中文字符 "机"、"器"、"学"、"习" 分别匹配
- ✅ 第二句中的"学习"（动词）也被高亮

---

## 📝 示例 4：英文搜索

**搜索**：`machine learning`

**文档内容**：
```
Machine Learning is a subset of Artificial Intelligence.
The machine is learning from data.
```

**高亮效果**：
```
<mark>Machine</mark> <mark>Learning</mark> is a subset of Artificial Intelligence.
The <mark>machine</mark> is <mark>learning</mark> from data.
```

**显示效果**：
> **Machine Learning** is a subset of Artificial Intelligence.
> The **machine** is **learning** from data.

**说明**：
- ✅ 不区分大小写（Machine 和 machine 都匹配）
- ✅ 使用词边界匹配（不会匹配 "machines" 中的 "machine"）
- ✅ 两个单词分别高亮

---

## 📝 示例 5：部分匹配的副作用

**搜索**：`机器`

**文档内容**：
```
机器学习使用随机算法。
```

**高亮效果**：
```
<mark>机</mark><mark>器</mark>学习使用随<mark>机</mark>算法。
```

**显示效果**：
> **机器**学习使用随**机**算法。

**说明**：
- ⚠️ "随机"中的"机"也被高亮了（副作用）
- 这是按字符拆分的权衡，为了支持不相邻关键词搜索

---

## 🎯 最佳实践

### 如何获得最佳高亮效果？

1. **搜索完整词组**
   - ✅ 好：`机器学习`
   - ⚠️ 可能过度高亮：`机 器 学 习`

2. **使用具体的关键词**
   - ✅ 好：`深度学习算法`
   - ⚠️ 太宽泛：`学习`

3. **中英文混合搜索**
   - ✅ 好：`Python机器学习`
   - ✅ 好：`TensorFlow深度学习`

4. **多关键词搜索**
   - ✅ 好：`神经网络 卷积`
   - ✅ 好：`transformer attention`

---

## 🔍 实际测试

你可以在浏览器中测试这些搜索：

1. 打开 http://127.0.0.1:8000
2. 尝试以下搜索：
   - `机器学习`
   - `机器 学习`
   - `Python 机器学习`
   - `深度学习 算法`
   - `神经网络`
3. 点击任意搜索结果查看高亮效果

---

## 💡 技术说明

### 为什么不使用智能分词？

**原因**：
1. **简单性**：不需要额外的分词库（如 jieba）
2. **一致性**：与 SQLite FTS5 的索引方式保持一致
3. **灵活性**：支持任意关键词组合
4. **性能**：字符级匹配速度快

### 可能的改进方向

如果需要更精确的高亮，可以考虑：
1. 集成中文分词库（jieba、pkuseg 等）
2. 使用 NLP 技术识别词组
3. 提供"精确匹配"和"模糊匹配"两种模式
4. 根据搜索结果的上下文智能高亮

但这些改进会增加复杂度和依赖，当前的实现已经能满足大多数使用场景。
